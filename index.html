<!--  Vireon UI – old design, now with functional dashboard -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Vireon – Discord Bot Hosting</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary:#6e48aa;--secondary:#9d50bb;
      --dark:#121218;--darker:#0a0a0e;
      --light:#f8f9fa;--gray:#2d2d3a;--light-gray:#b9bbbe;
      --success:#3ba55c;--danger:#ed4245;--accent:#4776E6;
    }
    *{margin:0;padding:0;box-sizing:border-box;font-family:'Inter',sans-serif}
    body{background:var(--dark);color:var(--light);line-height:1.6;overflow-x:hidden}
    a{color:var(--accent);text-decoration:none;transition:.2s}
    header{display:flex;justify-content:space-between;align-items:center;padding:20px 5%;background:var(--darker);position:fixed;width:100%;top:0;z-index:100;border-bottom:1px solid rgba(255,255,255,.05)}
    .logo{font-size:28px;font-weight:800;background:linear-gradient(90deg,var(--primary),var(--secondary));-webkit-background-clip:text;color:transparent}
    nav ul{display:flex;list-style:none}
    nav ul li{margin-left:30px}
    nav ul li a{font-weight:500;color:var(--light-gray)}
    .auth-buttons button{border-radius:6px;padding:10px 22px;cursor:pointer}
    .login{background:transparent;border:1px solid var(--gray);color:var(--light);margin-right:12px}
    .signup{background:linear-gradient(90deg,var(--primary),var(--secondary));color:#fff;border:none}
    /* Dashboard */
    .dashboard{display:flex;min-height:calc(100vh - 70px);margin-top:70px}
    .sidebar{width:250px;background:var(--darker);padding:25px 0}
    .sidebar h3{padding:0 25px;margin-bottom:20px;font-size:20px}
    .sidebar ul{list-style:none}
    .sidebar li{padding:10px 25px;color:var(--light-gray);cursor:pointer}
    .sidebar li:hover{background:rgba(255,255,255,.05)}
    .main-content{flex:1;padding:40px}
    .connect-bot{background:rgba(255,255,255,.03);border-radius:10px;padding:30px;margin-bottom:30px}
    .connect-bot h3{margin-bottom:15px}
    .connect-form input, .connect-form select{width:100%;padding:12px 15px;background:rgba(255,255,255,.05);border:1px solid var(--gray);border-radius:6px;color:var(--light);margin-bottom:15px}
    .connect-submit{background:var(--primary);color:#fff;border:none;padding:12px 25px;border-radius:6px;cursor:pointer}
    .bot-item{display:flex;align-items:center;padding:15px;border-bottom:1px solid rgba(255,255,255,.05)}
    .bot-status{width:10px;height:10px;border-radius:50%;margin-right:10px}
    .bot-status.online{background:var(--success)}
    .bot-status.offline{background:var(--danger)}
  </style>
</head>
<body>
  <header>
    <div class="logo">Vireon</div>
    <nav>
      <ul>
        <li><a href="#">Features</a></li>
        <li><a href="#">Pricing</a></li>
        <li><a href="#">Docs</a></li>
      </ul>
    </nav>
    <div class="auth-buttons">
      <button class="login" id="loginBtn">Log In</button>
      <button class="signup" id="signupBtn">Sign Up</button>
    </div>
  </header>

  <div class="dashboard" id="dashboard">
    <div class="sidebar">
      <h3>Dashboard</h3>
      <ul>
        <li id="nav-bots">My Bots</li>
        <li id="nav-commands">Commands</li>
        <li id="nav-settings">Settings</li>
      </ul>
    </div>

    <div class="main-content">
      <!-- BOT CONNECT -->
      <div class="connect-bot">
        <h3>Connect Your Discord Bot</h3>
        <form class="connect-form" id="botConnectForm">
          <input type="password" id="botToken" placeholder="Paste your Discord bot token">
          <select id="nodeSelect"><option value="">Select a node</option></select>
          <button type="submit" class="connect-submit">Connect Bot</button>
        </form>
      </div>

      <!-- LIST OF BOTS -->
      <div id="botsContainer"></div>

      <!-- SIMPLE COMMAND TOGGLE SECTION -->
      <div id="commandsSection" class="hidden">
        <h3>Command Toggles (demo)</h3>
        <p>Coming soon – this is just a placeholder for your future command‑management UI.</p>
      </div>
    </div>
  </div>

  <!-- ========================== JS ========================== -->
  <script>
    const API_BASE = '';  // same origin
    const botConnectForm = document.getElementById('botConnectForm');
    const botsContainer  = document.getElementById('botsContainer');
    const nodeSelect     = document.getElementById('nodeSelect');
    const commandsSection= document.getElementById('commandsSection');

    /* ------------- NAVIGATION (simple show/hide) ------------- */
    document.getElementById('nav-bots').onclick = () => {
      botsContainer.style.display   = '';
      commandsSection.style.display = 'none';
    };
    document.getElementById('nav-commands').onclick = () => {
      botsContainer.style.display   = 'none';
      commandsSection.style.display = '';
    };

    /* ------------- Load nodes for select ------------- */
    async function loadNodes(){
      const res  = await fetch(API_BASE+'/api/nodes');
      const list = await res.json();
      list.forEach(n=>{
        const opt = document.createElement('option');
        opt.value = n; opt.textContent = n;
        nodeSelect.appendChild(opt);
      });
    }

    /* ------------- List running bots ------------- */
    async function loadBots(){
      const res  = await fetch(API_BASE+'/api/bots');
      const bots = await res.json();

      botsContainer.innerHTML = bots.length ? '' : '<p>No bots connected yet.</p>';
      bots.forEach(b=>{
        const div = document.createElement('div');
        div.className = 'bot-item';
        div.innerHTML = `
          <div class="bot-status online"></div>
          <div>
            <h4>${b.username}</h4>
            <p>Node: ${b.node}</p>
          </div>
        `;
        botsContainer.appendChild(div);
      });
    }

    /* ------------- Connect bot ------------- */
    botConnectForm.addEventListener('submit', async e=>{
      e.preventDefault();
      const token = document.getElementById('botToken').value.trim();
      const node  = nodeSelect.value;

      if(!token || !node){ alert('Token & node required'); return; }

      const res = await fetch(API_BASE+'/api/bots', {
        method:'POST', headers:{'Content-Type':'application/json'},
        body: JSON.stringify({ token, node })
      });
      const data = await res.json();
      if(res.ok){ alert('Bot started: '+data.username); loadBots(); }
      else      { alert(data.message || 'Failed to start bot'); }
    });

    /* ------------- Init ------------- */
    loadNodes(); loadBots();
  </script>
</body>
</html>
